openapi: 3.0.0
info:
  title: Broker API
  version: 1.0.0
  description: API for retrieving broker data

components:
  parameters:
    Tenant:
      name: X-Okapi-Tenant
      in: header
      description: Okapi Tenant
      required: false
      schema:
        type: string
        pattern: '^[_a-z][_a-z0-9]*$'
    RequesterRequestId:
      name: requester_req_id
      in: query
      description: Filter Ill transactions by requester request id
      schema:
        type: string
    IllTransactionId:
      name: ill_transaction_id
      in: query
      schema:
        type: string
      description: Filter by ILL transaction ID
    RequesterSymbol:
      name: requester_symbol
      in: query
      description: Filter by requester symbol
      schema:
        type: string
    Offset:
      name: offset
      in: query
      description: Offset for pagination (first item is 0)
      schema:
        type: integer
        format: int32
    Limit:
      name: limit
      in: query
      description: Limit for pagination
      schema:
        type: integer
        format: int32
    ArchiveDelay:
      name: archive_delay
      in: query
      description: How old ILL Transaction to archive, for example "48h"
      required: true
      schema:
        type: string
    ArchiveStatus:
      name: archive_status
      in: query
      description: Comma separated list of statuses to archive, for example "LoanCompleted,CopyCompleted,Unfilled"
      required: true
      schema:
        type: string
    Cql:
      name: cql
      in: query
      description: CQL query for filtering results
      schema:
        type: string
    Side:
      name: side
      in: query
      description: Patron request side, valid values "borrowing" and "lending"
      schema:
        type: string
    Symbol:
      name: symbol
      in: query
      description: Symbol for access control
      schema:
        type: string
    PatronRequestId:
      name: pr_id
      in: query
      description: Patron request ID
      schema:
        type: string
  schemas:
    Index:
      type: object
      properties:
        revision:
          type: string
          description: VCS revision
        signature:
          type: string
          description: Application signature
        links:
          type: object
          properties:
            illTransactionsLink:
              type: string
              description: Link to ILL transactions
            peersLink:
              type: string
              description: Link to peers
            eventsLink:
              type: string
              description: Link to events
            locatedSuppliersLink:
              type: string
              description: Link to located suppliers
            patronRequestsLink:
              type: string
              description: Link to patron request
          required:
            - eventsLink
            - illTransactionsLink
            - peersLink
            - locatedSuppliersLink
            - patronRequestsLink
      required:
        - revision
        - signature
        - links
    Error:
      type: object
      properties:
        error:
          type: string
          description: Error message
    StatusMessage:
      type: object
      properties:
        status:
          type: string
          description: Process status
      required:
        - status
    IllTransactions:
      type: object
      required:
        - items
        - about
      properties:
        about:
          $ref: '#/components/schemas/About'
        items:
          type: array
          description: List of ILL transactions
          items:
            $ref: '#/components/schemas/IllTransaction'
    Events:
      type: object
      required:
        - items
        - about
      properties:
        about:
          $ref: '#/components/schemas/About'
        items:
          type: array
          description: List of events
          items:
            $ref: '#/components/schemas/Event'
    Peers:
      type: object
      required:
        - items
        - about
      properties:
        about:
          $ref: '#/components/schemas/About'
        items:
          type: array
          description: List of peers
          items:
            $ref: '#/components/schemas/Peer'
    LocatedSuppliers:
      type: object
      required:
        - items
        - about
      properties:
        about:
          $ref: '#/components/schemas/About'
        items:
          type: array
          description: List of peers
          items:
            $ref: '#/components/schemas/LocatedSupplier'
    About:
      type: object
      required:
        - count
      properties:
        count:
          type: integer
          format: int64
          description: Total number of items in the result
        nextLink:
          type: string
          description: Link to the next page of results
        prevLink:
          type: string
          description: Link to the previous page of results
        lastLink:
          type: string
          description: Link to the last page of results
    Event:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier of the event
        timestamp:
          type: string
          format: date-time
          description: Timestamp of the event
        illTransactionID:
          type: string
          description: ID of the ILL transaction (if applicable)
        patronRequestID:
          type: string
          description: ID of the Patron request (if applicable)
        eventType:
          type: string
          description: Type of the event
        eventName:
          type: string
          description: Name of the event
        eventStatus:
          type: string
          description: Status of the event
        eventData:
          type: object
          description: Data associated with the event
          additionalProperties: true
        resultData:
          type: object
          description: Result data of the event
          additionalProperties: true
        parentID:
          type: string
          description: Parent event ID
      required:  # List required fields if any
        - id
        - illTransactionID
        - timestamp
        - eventType
        - eventName
        - eventStatus
    IllTransaction:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the ILL transaction
        timestamp:
          type: string
          format: date-time
          description: Timestamp of the transaction
        requesterSymbol:
          type: string
          description: Symbol of the requesting institution
        requesterID:
          type: string
          description: ID of the requesting institution
        lastRequesterAction:
          type: string
          description: Last action performed by the requester
        prevRequesterAction:
          type: string
          description: Previous action performed by the requester
        supplierSymbol:
          type: string
          description: Symbol of the supplying institution
        requesterRequestID:
          type: string
          description: ID of the request from the requester's side
        supplierRequestID:
          type: string
          description: ID of the request from the supplier's side
        lastSupplierStatus:
          type: string
          description: Last status update from the supplier
        prevSupplierStatus:
          type: string
          description: Previous status update from the supplier
        illTransactionData:
          type: object
          description: Result data of the event
          additionalProperties: true
        eventsLink:
          type: string
          description: Link to Ill Transaction events
        locatedSuppliersLink:
          type: string
          description: Link to located Suppliers
        requesterPeerLink:
          type: string
          description: Link to requester Peer
      required:
        - id
        - timestamp
        - requesterSymbol
        - requesterID
        - lastRequesterAction
        - prevRequesterAction
        - supplierSymbol
        - requesterRequestID
        - supplierRequestID
        - lastSupplierStatus
        - prevSupplierStatus
        - illTransactionData
        - eventsLink
        - locatedSuppliersLink
        - requesterPeerLink
    Peer:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the peer
        symbols:
          type: array
          items:
            type: string
          description: Unique symbol representing the peer
        branchSymbols:
          type: array
          items:
            type: string
          description: Symbols of peer branches
        name:
          type: string
          description: Name of the peer
        url:
          type: string
          description: Network URL of the peer
        refreshPolicy:
          type: string
          enum: [never, transaction]
          description: Policy for refreshing peer information (never, transaction)
        refreshTime:
          type: string
          format: date-time
          description: Timestamp of refresh
        loansCount:
          type: integer
          format: int32
          description: Count of loans
        borrowsCount:
          type: integer
          format: int32
          description: Count of borrows
        vendor:
          type: string
          description: Vendor of the ISO18626 implementation, e.g "Alma", "ReShare"
        brokerMode:
          type: string
          enum: [opaque, transparent, translucent]
          description: Broker mode, e.g "opaque", "transparent" or "translucent"
        customData:
          type: object
          description: Custom data of peer
          additionalProperties: true
        httpHeaders:
          type: object
          description: HTTP headers to be sent with requests to the peer
          additionalProperties:
            type: string
      required:
        - id
        - symbols
        - name
        - url
        - refreshPolicy
        - vendor
        - brokerMode

    LocatedSupplier:
      type: object
      properties:
        id:
          type: string
          description: Generate ID
        illTransactionID:
          type: string
          description: Ill Transaction ID
        supplierID:
          type: string
          description: Supplier ID from peer table
        supplierSymbol:
          type: string
          description: Supplier symbol to use for communication
        ordinal:
          type: integer
          format: int32
          description: Ordinal number for ordering
        supplierStatus:
          type: string
          description: Supplier status, possible values (new, selected, skipped)
        prevAction:
          type: string
          description: Previous requester action
        prevStatus:
          type: string
          description: Previous supplier transaction status
        lastAction:
          type: string
          description: Latest requester action
        lastStatus:
          type: string
          description: Latest supplier transaction status
        localID:
          type: string
          description: Item local ID
        prevReason:
          type: string
          description: Previous requester reason
        lastReason:
          type: string
          description: Latest requester reason
        supplierRequestID:
          type: string
          description: Supplier request ID
        supplierPeerLink:
          type: string
          description: Link to supplier Peer
      required:
        - id
        - illTransactionID
        - supplierID
        - supplierSymbol
        - ordinal
        - supplierPeerLink
    PatronRequest:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier of the patron request
        timestamp:
          type: string
          format: date-time
          description: Timestamp of the patron reuqest
        illRequest:
          type: object
          description: JSON of ISO18626 request
        state:
          type: string
          description: Patron request state
        side:
          type: string
          description: Patron request side - borrowing or lending
        patron:
          type: string
          description: User who requested item
        requesterSymbol:
          type: string
          description: Requester symbol
        supplierSymbol:
          type: string
          description: Supplier symbol
        requesterRequestId:
          type: string
          description: Requester patron request ID
      required:
        - id
        - timestamp
        - state
        - side
        - illRequest
    PatronRequests:
      type: object
      required:
        - items
        - about
      properties:
        about:
          $ref: '#/components/schemas/About'
        items:
          type: array
          description: List of patron request
          items:
            $ref: '#/components/schemas/PatronRequest'

    CreatePatronRequest:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier of the patron request
        illRequest:
          type: object
          description: JSON of ISO18626 request
        patron:
          type: string
          description: User who requested item
        requesterSymbol:
          type: string
          description: Requester symbol
        supplierSymbol:
          type: string
          description: Supplier symbol
      required:
        - illRequest

    ExecuteAction:
      type: object
      properties:
        action:
          type: string
          description: Action to execute
        actionParams:
          type: object
          description: Action parameters
      required:
        - action

    ActionResult:
      type: object
      properties:
        actionResult:
          type: string
          description: Action result
        message:
          type: string
          description: Action message
      required:
        - actionResult

    SseResult:
      type: object
      properties:
        event:
          type: string
          description: Event name, for example 'message-supplier'
        data:
          type: object
          description: Data of the event, for example ISO18626 message
      required:
        - event
        - data

    StateModel:
      type: object
      description: ReShare state model definition
      additionalProperties: false
      properties:
        type:
          type: string
          description: Self-referential type
        name:
          type: string
          description: Name of the state model
        desc:
          type: string
          description: Description of the state model
        version:
          type: string
          description: Version of the state model in SemVer
        states:
          type: array
          description: A list of all allowed states
          items:
            $ref: '#/components/schemas/ModelState'

    ModelState:
      title: State
      type: object
      description: Definition of a particular state
      properties:
        name:
          type: string
          description: Name of the state, in capital letters with underscores
        display:
          type: string
          description: Human-readable state name
        desc:
          type: string
          description: Description of the state, e.g., what situation is modelled by the state
        side:
          type: string
          description: Indicates which side of the request the state belongs to
          enum: 
            - REQUESTER
            - SUPPLIER
        actions:
          type: array
          description: List of all actions that may be performed on the request when in this state
          items:
            $ref: '#/components/schemas/ModelAction'
        events:
          type: array
          description: List of all events that may be triggered to the request when in this state
          items:
            $ref: '#/components/schemas/ModelEvent'
        terminal:
          type: boolean
          description: Indicates if the state is terminal (meaning no actions or events are allowed in this state)
      oneOf:
        - anyOf:
          - required:
            - actions
          - required:
            - events
        - required:
          - terminal
      required:
        - name
        - side

    ModelAction:
      type: object
      title: Action
      additionalProperties: false
      properties:
        name:
          type: string
          description: Description of the action
        transitions:
          type: array
          description: List of all possible state transitions after performing the action. When no transitions are defined, the action is considered to be non-state-changing
          items:
            type: string
      required:
        - name

    ModelEvent:
      type: object
      title: Event
      additionalProperties: false
      properties:
        name:
          type: string
          description: Description of the event
        transitions:
          type: array
          description: List of all possible state transitions after performing the event. When no transitions are defined, the event is considered to be non-state-changing
          items:
            type: string
      required:
        - name

paths:
  /:
    get:
      summary: Retrieve index information
      responses:
        '200':
          description: Successful retrieval of index information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Index'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /events:
    get:
      summary: Retrieve events
      parameters:
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/RequesterRequestId'
        - $ref: '#/components/parameters/IllTransactionId'
        - $ref: '#/components/parameters/RequesterSymbol'
      responses:
        '200':
          description: Successful retrieval of events
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Events'
        '400':
          description: Bad Request. Invalid query parameters.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /ill_transactions/{id}:
    get:
      summary: Get an ILL transaction by ID
      parameters:
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/RequesterSymbol'
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID of the ILL transaction to retrieve
      responses:
        '200':
          description: Successful retrieval of the ILL transaction
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IllTransaction'
        '400':
          description: Bad Request. Invalid query parameters.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Not Found. ILL transaction not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      summary: Delete an ILL transaction by ID
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID of the ILL transaction to delete
      responses:
        '204':
          description: ILL transaction deleted successfully (No Content)
        '404':
          description: ILL transaction not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /ill_transactions:
    get:
      summary: Get all ILL transactions
      parameters:
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/RequesterRequestId'
        - $ref: '#/components/parameters/RequesterSymbol'
        - $ref: '#/components/parameters/Cql'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
      responses:
        '200':
          description: Successful retrieval of the ILL transactions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IllTransactions'
        '400':
          description: Bad Request. Invalid query parameters.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Forbidden. Invalid tenant.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /peers:
    get:
      summary: Get all peers
      parameters:
        - $ref: '#/components/parameters/Cql'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
      responses:
        '200':
          description: Successful retrieval of peers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Peers'
        '400':
          description: Bad Request. Invalid query parameters.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      summary: Create a new peer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Peer'
      responses:
        '201':
          description: Peer created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Peer'
        '400':
          description: Bad request (e.g., invalid data)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /peers/{id}:
    get:
      summary: Get a peer by symbol
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID of the peer to retrieve
      responses:
        '200':
          description: Successful retrieval of the peer
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Peer'
        '404':
          description: Peer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      summary: Update a peer
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID of the peer to update
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Peer'
      responses:
        '200':
          description: Peer updated successfully
        '400':
          description: Bad request (e.g., invalid data)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Peer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      summary: Delete a peer
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID of the peer to delete
      responses:
        '204':
          description: Peer deleted successfully (No Content)
        '404':
          description: Peer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /located_suppliers:
    get:
      summary: Retrieve located suppliers
      parameters:
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/RequesterRequestId'
        - $ref: '#/components/parameters/IllTransactionId'
        - $ref: '#/components/parameters/RequesterSymbol'
      responses:
        '200':
          description: Successful retrieval of located suppliers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocatedSuppliers'
        '400':
          description: Bad Request. Invalid query parameters.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /archive_ill_transactions:
    post:
      summary: Trigger ILL Transaction archive process
      parameters:
        - $ref: '#/components/parameters/ArchiveDelay'
        - $ref: '#/components/parameters/ArchiveStatus'
      responses:
        '200':
          description: Process started successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusMessage'
        '400':
          description: Bad Request. Invalid query parameters.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /patron_requests:
    get:
      summary: Retrieve patron requests
      tags:
        - patron-requests-api
      parameters:
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/RequesterRequestId'
        - $ref: '#/components/parameters/RequesterSymbol'
        - $ref: '#/components/parameters/Cql'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Side'
        - $ref: '#/components/parameters/Symbol'
      responses:
        '200':
          description: Successful retrieval of events
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatronRequests'
        '400':
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      summary: Create a new patron request
      tags:
        - patron-requests-api
      parameters:
        - $ref: '#/components/parameters/Tenant'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePatronRequest'
      responses:
        '201':
          description: Patron request created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatronRequest'
        '400':
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /patron_requests/{id}:
    get:
      summary: Get a patron request by ID
      tags:
        - patron-requests-api
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID of the patron request to retrieve
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/Side'
        - $ref: '#/components/parameters/Symbol'
      responses:
        '200':
          description: Successful retrieval of the patron request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatronRequest'
        '404':
          description: Patron request not found
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      summary: Delete a patron request
      tags:
        - patron-requests-api
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID of the patron request to delete
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/Side'
        - $ref: '#/components/parameters/Symbol'
      responses:
        '204':
          description: Patron request deleted successfully (No Content)
        '404':
          description: Patron request not found
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /patron_requests/{id}/actions:
    get:
      summary: Get valid actions for patron request in current state
      tags:
        - patron-requests-api
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID of the patron request
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/Side'
        - $ref: '#/components/parameters/Symbol'
      responses:
        '200':
          description: List of available actions
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
        '404':
          description: Patron request not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: There was internal server error looking up patron request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /patron_requests/{id}/action:
    post:
      summary: Execute action for given patron request
      tags:
        - patron-requests-api
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID of the patron request
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/Side'
        - $ref: '#/components/parameters/Symbol'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExecuteAction'
      responses:
        '200':
          description: List of available actions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ActionResult'

        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Patron request not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: There was internal server error looking up patron request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /patron_requests/{id}/events:
    get:
      summary: Retrieve patron request related events
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID of the patron request
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/Side'
        - $ref: '#/components/parameters/Symbol'
      tags:
        - patron-requests-api
      responses:
        '200':
          description: Successful retrieval of patron request events
          content:
            application/json:
              schema:
                type: array
                items:
                   $ref: '#/components/schemas/Event'
        '400':
          description: Bad Request. Invalid query parameters.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /sse/events:
    get:
      summary: Subscribe to real-time notifications. Notification is send out every time when ISO18626 message is sent out
      tags:
        - sse-api
      parameters:
        - $ref: '#/components/parameters/Tenant'
        - $ref: '#/components/parameters/Side'
        - $ref: '#/components/parameters/Symbol'
      responses:
        '200':
          description: Result of subscription
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SseResult'
  
  /state_model/models/{model}:
    get:
      summary: Retrieve a state model by name
      tags:
        - patron-requests-api
      parameters:
        - in: path
          name: model
          schema: 
            type: string
          required: true
          description: The name of the statemodel to retrieve
        - $ref: '#/components/parameters/Tenant'
      responses:
        '200':
          description: Successful retrieval of state model
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StateModel'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
